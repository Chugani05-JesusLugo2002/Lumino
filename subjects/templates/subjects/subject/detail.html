{% extends "base.html" %}

{% load student_mark from subject_extras %}

{% block title %}Lumino | {{ subject.code }} {% endblock %}

{% block main %}
  <div class="my-3 d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
      <a href="{% url "subjects:subject-list" %}" class="h2 mx-3" data-bs-toggle="tooltip" data-bs-title="Back to subject list"><i class="bi bi-arrow-left-circle-fill"></i></a> 
      <h1>{{ subject }}</h1>
    </div>
    {% if user.profile.is_student %}
      {% student_mark user subject %}
    {% else %}
      <div>
        <a href="{% url "subjects:add-lesson" subject.code %}" class="btn btn-success">Add lesson</a>
        <a href="{% url "subjects:mark-list" subject.code %}" class="btn btn-outline-primary">Marks</a>
      </div>
    {% endif %}
  </div>

  <div class="list-group list-group-flush">
    {% for lesson in lessons %}
    <div class="row">
      <div class="btn-group my-1">
        <a href="{{ lesson.get_absolute_url }}" class="list-group-item btn btn-light col-12 text-start">
          <i class="bi bi-book mx-2"></i> {{ lesson }}
        </a>
        <a href="{{ lesson.get_edit_url }}" class="btn btn-primary" data-bs-toggle="tooltip" data-bs-title="Edit lesson"><i class="bi bi-pen-fill"></i></a>
        <a href="{{ lesson.get_delete_url }}" class="btn btn-danger" data-bs-toggle="tooltip" data-bs-title="Delete lesson"><i class="bi bi-trash-fill"></i></a>
      </div>

    </div>
    {% empty %}
      <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-diamond"></i> No lessons available yet in this subject.
      </div>      
    {% endfor %}
  </div>
{% endblock %}